---
import type { CollectionEntry } from "astro:content";
import { commentConfig } from "@/config";
import { removeFileExtension } from "@/utils/url-utils";
import Giscus from "./Giscus.astro";

interface Props {
	post: CollectionEntry<"posts">;
}

const { id, data: _data } = Astro.props.post;

const slug = removeFileExtension(id);
const path = `/posts/${slug}`;
// const url = `${Astro.site?.href}${path}`;

let commentService = "";
if (commentConfig?.enable && commentConfig?.giscus) {
	commentService = "giscus";
}
---
{commentConfig?.enable && (
  <div class="card-base p-6 mb-4">
    {commentService === 'giscus' && <Giscus path={path} />}
    {commentService === '' && null}
  </div>
)}
