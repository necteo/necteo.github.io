---
title: '설계 하면서 들었던 생각들'
---

---

매점 테이블명을 정하는 과정

- 영화관 매점 영어로 검색
- concession stand라는 단어 등장
- store와 고민하다가 concession으로 결정
- 뭔가 애매해서 다시 알아보니 concession은 사업권을 의미하는 것 같고
  concession stand가 사업권을 받은 매점을 의미하는 듯
- 이제 store와 concession stand 중 고민
- 근데 이름이 너무 길지 않나
- ChatGPT와 Gemini를 싸우게 한 결과 store로 결정
- gpt는 이름이 가진 의미에 집중해서 concession을 추천했지만
  작은 프로젝트기도 하고 우리나라 영화관에서 store라고 하면 팝콘/콜라가 먼저 떠오른다고 생각했음

주문 상태를 나타내는 컬럼은 NUMBER? VARCHAR2?

- state를 0, 1, 2 이렇게 할 지
  'PAID', 'READY', 'DONE', 'CANCELED' 이렇게 할 지 고민
- 숫자는 다루기도 쉽고 용량도 적고 속도에서 이득을 볼 수 있다
- 문자는 알아보기 쉽다, 별도의 코드 설명 테이블 불필요
- 상태가 4개정도 뿐이고 상품 주문은 내가 주로 만들 예정이라 VARCHAR2로 결정

내가 설계한 거

```sql
CREATE TABLE store (
    store_id    NUMBER,
    location    VARCHAR2(100),
    staff_id    NUMBER
);

CREATE TABLE store_product (
    product_id    NUMBER,
    name                VARCHAR2(500),
    price               NUMBER
);

CREATE TABLE store_product_combo (
    product_combo_id  NUMBER,
    product_id              NUMBER,
    option_category_id      NUMBER,
    size                    VARCHAR2(10),
    quantity                NUMBER
);

CREATE TABLE store_product_option (
    product_option_id      NUMBER,
    name    VARCHAR2(100),
    size    VARCHAR2(10),
    option_category_id NUMBER
);

CREATE TABLE store_product_option_category (
    option_category_id      NUMBER,
    name    VARCHAR2(100)
);

CREATE TABLE store_order (
    order_id    NUMBER,
    member_id   NUMBER,
    store_id    NUMBER,
    product_id  NUMBER,
    quantity    NUMBER,
    regdate     DATE DEFAULT SYSDATE,
    total       NUMBER,
    state       VARCHAR2(20)
);

CREATE TABLE store_order_option (
    order_option_id     NUMBER,
    order_id            NUMBER,
    product_option_id   NUMBER
);
```

이게 Gemini

```sql
-- 1. 매장 (유형 추가)
CREATE TABLE store (
    store_id    NUMBER PRIMARY KEY,
    name        VARCHAR2(100), -- 명칭 누락 추가
    store_type  VARCHAR2(20),  -- DIRECT, CONCESSION
    location    VARCHAR2(100),
    staff_id    NUMBER
);

-- 2. 상품
CREATE TABLE product (
    product_id  NUMBER PRIMARY KEY,
    name        VARCHAR2(500),
    price       NUMBER -- 현재 기준가
);

-- 3. 주문 마스터 (누가, 어디서, 언제, 총 얼마를)
CREATE TABLE store_order (
    order_id    NUMBER PRIMARY KEY,
    member_id   NUMBER,
    store_id    NUMBER,
    total_amount NUMBER,
    state       VARCHAR2(50),
    regdate     DATE DEFAULT SYSDATE
);

-- 4. 주문 상세 (무엇을, 몇개, 당시 얼마에) - 중요!
CREATE TABLE store_order_item (
    order_item_id NUMBER PRIMARY KEY,
    order_id      NUMBER, -- FK
    product_id    NUMBER, -- FK
    quantity      NUMBER,
    sale_price    NUMBER  -- 주문 당시 단가 보존
);

-- 5. 주문 옵션 (어떤 옵션을 선택했나)
CREATE TABLE store_order_option (
    order_option_id     NUMBER PRIMARY KEY,
    order_item_id       NUMBER, -- 상세와 연결
    product_option_id   NUMBER
);
```

우선 order_item 테이블은 필요하다고 판단
